# UI Quality Configuration for {{PROJECT_NAME}}
# Generated by Claude Code Memory setup.sh
# See docs/UI_CONSISTENCY_GUIDE.md for full documentation

# ============================================================================
# Token Sources
# ============================================================================
# Define where your design tokens are located. The system extracts token values
# from these sources to detect hardcoded values (token drift).

tokens:
  # CSS Custom Properties (CSS Variables)
  css_vars:
    paths:
      - src/styles/tokens.css
      - src/styles/variables.css
      - src/styles/theme.css
    prefixes:
      - --color-
      - --spacing-
      - --radius-
      - --font-
      - --shadow-
      - --border-
      - --z-

  # Tailwind CSS (optional - uncomment if using Tailwind)
  # tailwind:
  #   config_path: tailwind.config.js

  # Figma Integration (optional - uncomment if syncing from Figma)
  # figma:
  #   file_key: ${FIGMA_FILE_KEY}
  #   access_token: ${FIGMA_ACCESS_TOKEN}

# ============================================================================
# Scanning Configuration
# ============================================================================
# Define which files to analyze and which to exclude.

scanning:
  # Files/directories to include (glob patterns)
  paths:
    - src/**/*.tsx
    - src/**/*.jsx
    - src/**/*.vue
    - src/**/*.svelte
    - src/**/*.css
    - src/**/*.scss
    - src/**/*.sass
    - components/**/*.tsx
    - components/**/*.vue

  # Files/directories to exclude (glob patterns)
  exclude:
    - node_modules
    - dist
    - build
    - .next
    - coverage
    - "**/*.test.tsx"
    - "**/*.test.ts"
    - "**/*.spec.tsx"
    - "**/*.spec.ts"
    - "**/*.stories.tsx"
    - "**/*.stories.ts"
    - "**/__tests__/**"
    - "**/__mocks__/**"

# ============================================================================
# Gating Configuration
# ============================================================================
# Controls how strictly issues are enforced.

gating:
  # Mode: 'strict' (fail CI on FAIL issues) or 'lenient' (warn only)
  mode: strict

  # Similarity thresholds for duplicate detection
  similarity_thresholds:
    # Exact duplicates (identical styles)
    duplicate: 0.95
    # Near-duplicates (similar styles, minor differences)
    near_duplicate: 0.85
    # Outlier detection (standard deviations from mean)
    outlier: 1.5

  # Minimum confidence for findings (0.0 - 1.0)
  min_confidence: 0.7

# ============================================================================
# Rule Configuration
# ============================================================================
# Enable/disable specific rules and customize their behavior.

rules:
  # Token Drift Rules (detect hardcoded values)
  COLOR.NON_TOKEN:
    enabled: true
    severity: FAIL
  SPACING.OFF_SCALE:
    enabled: true
    severity: FAIL
  RADIUS.OFF_SCALE:
    enabled: true
    severity: FAIL
  TYPOGRAPHY.OFF_SCALE:
    enabled: true
    severity: FAIL

  # Duplication Rules (detect repeated patterns)
  STYLE.DUPLICATE_SET:
    enabled: true
    severity: WARN
    min_occurrences: 3  # Only flag if 3+ identical occurrences
  STYLE.NEAR_DUPLICATE_SET:
    enabled: true
    severity: WARN
  UTILITY.DUPLICATE_SEQUENCE:
    enabled: true
    severity: WARN
    min_length: 3  # Minimum number of utilities in sequence
  COMPONENT.DUPLICATE_CLUSTER:
    enabled: true
    severity: WARN

  # CSS Smell Rules (detect anti-patterns)
  CSS.SPECIFICITY.ESCALATION:
    enabled: true
    severity: WARN
    max_specificity: 30  # Flag selectors exceeding this specificity score
  IMPORTANT.NEW_USAGE:
    enabled: true
    severity: FAIL  # Block new !important declarations
  SUPPRESSION.NO_RATIONALE:
    enabled: true
    severity: WARN

  # Inconsistency Rules (detect outlier styling)
  ROLE.OUTLIER.BUTTON:
    enabled: true
    severity: WARN
  ROLE.OUTLIER.INPUT:
    enabled: true
    severity: WARN
  ROLE.OUTLIER.CARD:
    enabled: true
    severity: WARN
  FOCUS.RING.INCONSISTENT:
    enabled: true
    severity: WARN

# ============================================================================
# Baseline Configuration
# ============================================================================
# Baseline separates existing issues from new issues.
# Baseline issues are informational and don't block CI.

baseline:
  # Location of baseline file
  path: .ui-quality/baseline.json

  # Auto-update baseline after successful CI runs
  auto_update: false

  # Files to always treat as baseline (legacy code)
  legacy_paths:
    - src/legacy/**
    - src/deprecated/**

# ============================================================================
# Reporting Configuration
# ============================================================================
# Configure output formats and report generation.

reporting:
  # Output formats: cli, json, sarif, html
  formats:
    - cli
    - sarif

  # SARIF output path (for GitHub Security tab integration)
  sarif_output: .ui-quality/results.sarif

  # HTML report output path (for /redesign command)
  html_output: .ui-quality/report.html

  # Include baseline issues in reports
  include_baseline: false

  # Include fix suggestions in reports
  include_remediation: true

# ============================================================================
# Performance Configuration
# ============================================================================
# Tune performance for large codebases.

performance:
  # Enable caching (recommended)
  cache_enabled: true

  # Cache location
  cache_path: .ui-quality/cache

  # Parallel processing
  parallel: true
  max_workers: 4

  # Skip unchanged files (incremental mode)
  incremental: true
